{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./Modules/Menu/Resources/assets/admin/js/main.js","webpack:///./Modules/Menu/node_modules/nestable2/jquery.nestable.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","id","window","admin","removeSubmitButtonOffsetOn","$","on","e","addClass","currentTarget","removeClass","nestable","maxDepth","ajax","type","url","route","contentType","data","JSON","stringify","success","trans","error","xhr","responseJSON","message","confirmationModal","closest","modal","find","preventDefault","fadeOut","document","undefined","hasTouch","hasPointerEvents","el","createElement","docEl","documentElement","style","pointerEvents","appendChild","supports","getComputedStyle","removeChild","defaults","contentCallback","item","content","listNodeName","itemNodeName","handleNodeName","contentNodeName","rootClass","listClass","itemClass","dragClass","handleClass","contentClass","collapsedClass","placeClass","noDragClass","noChildrenClass","emptyClass","expandBtnHTML","collapseBtnHTML","group","threshold","fixedDepth","fixed","includeContent","scroll","scrollSensitivity","scrollSpeed","scrollTriggers","top","left","right","bottom","effect","animation","time","callback","onDragStart","beforeDragStop","listRenderer","children","options","html","itemRenderer","item_attrs","item_attrs_string","map","join","Plugin","element","this","w","extend","json","_build","init","list","reset","placeEl","items","each","k","parent","setParent","hasClass","collapseItem","length","appendEmptyElement","dragEl","target","action","parents","eq","expandItem","onStartEvent","handle","isTouch","test","touches","dragStart","onMoveEvent","dragMove","onEndEvent","dragStop","changedTouches","addEventListener","removeEventListener","off","unbind","destroy","trigger","add","listClassSelector","tree","parent_id","append","_buildItem","replace","_getItemById","replaceWith","removeItem","opts","remove","emptyListsSelector","siblings","itemId","removeAll","node","first","show","parse","_buildList","that","index","sub","attr","classes","data_attrs","createDataAttrs","item_classes","new_classes","filterClasses","val","createClassesString","outerHTML","serialize","step","level","array","li","push","asNestedSet","ret","lft","traverse","depth","pid","rgt","isInt","parseInt","sort","a","b","isNumeric","Math","floor","returnOptions","serialise","toHierarchy","_recursiveItems","attribute","match","expression","currentItem","listType","toArray","sDepth","startDepthCount","_recursiveArray","rootID","parentItem","mouse","offsetX","offsetY","startX","startY","lastX","lastY","nowX","nowY","distX","distY","dirAx","dirX","dirY","lastDirX","lastDirY","distAxX","distAxY","moving","dragRootEl","dragDepth","hasNewRoot","pointEl","expandAll","collapseAll","is","prepend","unsetParent","dragItem","position","pageY","pageX","continueExecution","css","height","offset","outerWidth","setIndexOfItem","after","parentNode","appendTo","body","createSubLevel","unshift","restoreItemAtIndex","dragElement","indexArray","currentEl","lastIndex","placeElement","clone","nextEl","srcIndex","prev","opt","newAx","abs","jQuery","fn","scrollParent","scrolled","tagName","offsetHeight","scrollTop","offsetWidth","scrollLeft","width","console","warn","scrollTimer","clearTimeout","setTimeout","last","next","isEmpty","visibility","elementFromPoint","pageYOffset","pointElRoot","isNewRoot","before","params","lists","retval","args","arguments","Nestable","counter","plugin","pluginArgs","apply","Zepto"],"mappings":"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","file":"/Modules/Menu/Assets/admin/js/menu.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 240);\n","import 'nestable2';\n\nwindow.admin.removeSubmitButtonOffsetOn('#image');\n\n$('#type').on('change', (e) => {\n    $('.link-field').addClass('hide');\n    $(`.${e.currentTarget.value}-field`).removeClass('hide');\n});\n\n$('.dd').nestable({ maxDepth: 15 });\n\n$('.dd').on('change', () => {\n    $.ajax({\n        type: 'PUT',\n        url: route('admin.menus.items.order.update'),\n        contentType: 'application/json; charset=utf-8',\n        data: JSON.stringify($('.dd').nestable('serialize')[0]),\n        success() {\n            success(trans('menu::messages.menu_items_order_updated'));\n        },\n        error(xhr) {\n            error(xhr.responseJSON.message);\n        },\n    });\n});\n\nlet id;\nlet confirmationModal = $('#confirmation-modal');\n\n$('.delete-menu-item').on('click', (e) => {\n    id = $(e.currentTarget).closest('.dd-item').data('id');\n\n    confirmationModal.modal('show');\n});\n\nconfirmationModal.find('form').on('submit', (e) => {\n    e.preventDefault();\n\n    confirmationModal.modal('hide');\n\n    $.ajax({\n        type: 'DELETE',\n        url: route('admin.menus.items.destroy', id),\n        success() {\n            success(trans('menu::messages.menu_item_deleted'));\n\n            $(`.dd-item[data-id=\"${id}\"]`).fadeOut();\n        },\n        error(xhr) {\n            error(xhr.responseJSON.message);\n        },\n    });\n});\n","/*!\n * Nestable jQuery Plugin - Copyright (c) 2014 Ramon Smit - https://github.com/RamonSmit/Nestable\n */\n\n(function($, window, document, undefined) {\n    var hasTouch = 'ontouchstart' in document;\n\n    /**\n     * Detect CSS pointer-events property\n     * events are normally disabled on the dragging element to avoid conflicts\n     * https://github.com/ausi/Feature-detection-technique-for-pointer-events/blob/master/modernizr-pointerevents.js\n     */\n    var hasPointerEvents = (function() {\n        var el = document.createElement('div'),\n            docEl = document.documentElement;\n        if (!('pointerEvents' in el.style)) {\n            return false;\n        }\n        el.style.pointerEvents = 'auto';\n        el.style.pointerEvents = 'x';\n        docEl.appendChild(el);\n        var supports = window.getComputedStyle && window.getComputedStyle(el, '').pointerEvents === 'auto';\n        docEl.removeChild(el);\n        return !!supports;\n    })();\n\n    var defaults = {\n        contentCallback: function(item) {return item.content || '' ? item.content : item.id;},\n        listNodeName: 'ol',\n        itemNodeName: 'li',\n        handleNodeName: 'div',\n        contentNodeName: 'span',\n        rootClass: 'dd',\n        listClass: 'dd-list',\n        itemClass: 'dd-item',\n        dragClass: 'dd-dragel',\n        handleClass: 'dd-handle',\n        contentClass: 'dd-content',\n        collapsedClass: 'dd-collapsed',\n        placeClass: 'dd-placeholder',\n        noDragClass: 'dd-nodrag',\n        noChildrenClass: 'dd-nochildren',\n        emptyClass: 'dd-empty',\n        expandBtnHTML: '<button class=\"dd-expand\" data-action=\"expand\" type=\"button\">Expand</button>',\n        collapseBtnHTML: '<button class=\"dd-collapse\" data-action=\"collapse\" type=\"button\">Collapse</button>',\n        group: 0,\n        maxDepth: 5,\n        threshold: 20,\n        fixedDepth: false, //fixed item's depth\n        fixed: false,\n        includeContent: false,\n        scroll: false,\n        scrollSensitivity: 1,\n        scrollSpeed: 5,\n        scrollTriggers: {\n            top: 40,\n            left: 40,\n            right: -40,\n            bottom: -40\n        },\n        effect: {\n            animation: 'none',\n            time: 'slow'\n        },\n        callback: function(l, e, p) {},\n        onDragStart: function(l, e, p) {},\n        beforeDragStop: function(l, e, p) {},\n        listRenderer: function(children, options) {\n            var html = '<' + options.listNodeName + ' class=\"' + options.listClass + '\">';\n            html += children;\n            html += '</' + options.listNodeName + '>';\n\n            return html;\n        },\n        itemRenderer: function(item_attrs, content, children, options, item) {\n            var item_attrs_string = $.map(item_attrs, function(value, key) {\n                return ' ' + key + '=\"' + value + '\"';\n            }).join(' ');\n\n            var html = '<' + options.itemNodeName + item_attrs_string + '>';\n            html += '<' + options.handleNodeName + ' class=\"' + options.handleClass + '\">';\n            html += '<' + options.contentNodeName + ' class=\"' + options.contentClass + '\">';\n            html += content;\n            html += '</' + options.contentNodeName + '>';\n            html += '</' + options.handleNodeName + '>';\n            html += children;\n            html += '</' + options.itemNodeName + '>';\n\n            return html;\n        }\n    };\n\n    function Plugin(element, options) {\n        this.w  = $(document);\n        this.el = $(element);\n        options = options || defaults;\n\n        if (options.rootClass !== undefined && options.rootClass !== 'dd') {\n            options.listClass       = options.listClass ? options.listClass : options.rootClass + '-list';\n            options.itemClass       = options.itemClass ? options.itemClass : options.rootClass + '-item';\n            options.dragClass       = options.dragClass ? options.dragClass : options.rootClass + '-dragel';\n            options.handleClass     = options.handleClass ? options.handleClass : options.rootClass + '-handle';\n            options.collapsedClass  = options.collapsedClass ? options.collapsedClass : options.rootClass + '-collapsed';\n            options.placeClass      = options.placeClass ? options.placeClass : options.rootClass + '-placeholder';\n            options.noDragClass     = options.noDragClass ? options.noDragClass : options.rootClass + '-nodrag';\n            options.noChildrenClass = options.noChildrenClass ? options.noChildrenClass : options.rootClass + '-nochildren';\n            options.emptyClass      = options.emptyClass ? options.emptyClass : options.rootClass + '-empty';\n        }\n\n        this.options = $.extend({}, defaults, options);\n\n        // build HTML from serialized JSON if passed\n        if (this.options.json !== undefined) {\n            this._build();\n        }\n\n        this.init();\n    }\n\n    Plugin.prototype = {\n\n        init: function() {\n            var list = this;\n\n            list.reset();\n            list.el.data('nestable-group', this.options.group);\n            list.placeEl = $('<div class=\"' + list.options.placeClass + '\"/>');\n\n            var items = this.el.find(list.options.itemNodeName);\n            $.each(items, function(k, el) {\n                var item = $(el),\n                    parent = item.parent();\n                list.setParent(item);\n                if (parent.hasClass(list.options.collapsedClass)) {\n                    list.collapseItem(parent.parent());\n                }\n            });\n\n            // Append the .dd-empty div if the list don't have any items on init\n            if (!items.length) {\n                this.appendEmptyElement(this.el);\n            }\n\n            list.el.on('click', 'button', function(e) {\n                if (list.dragEl) {\n                    return;\n                }\n                var target = $(e.currentTarget),\n                    action = target.data('action'),\n                    item = target.parents(list.options.itemNodeName).eq(0);\n                if (action === 'collapse') {\n                    list.collapseItem(item);\n                }\n                if (action === 'expand') {\n                    list.expandItem(item);\n                }\n            });\n\n            var onStartEvent = function(e) {\n                var handle = $(e.target);\n                if (!handle.hasClass(list.options.handleClass)) {\n                    if (handle.closest('.' + list.options.noDragClass).length) {\n                        return;\n                    }\n                    handle = handle.closest('.' + list.options.handleClass);\n                }\n                if (!handle.length || list.dragEl) {\n                    return;\n                }\n\n                list.isTouch = /^touch/.test(e.type);\n                if (list.isTouch && e.touches.length !== 1) {\n                    return;\n                }\n\n                e.preventDefault();\n                list.dragStart(e.touches ? e.touches[0] : e);\n            };\n\n            var onMoveEvent = function(e) {\n                if (list.dragEl) {\n                    e.preventDefault();\n                    list.dragMove(e.touches ? e.touches[0] : e);\n                }\n            };\n\n            var onEndEvent = function(e) {\n                if (list.dragEl) {\n                    e.preventDefault();\n                    list.dragStop(e.touches ? e.changedTouches[0] : e);\n                }\n            };\n\n            if (hasTouch) {\n                list.el[0].addEventListener('touchstart', onStartEvent, false);\n                window.addEventListener('touchmove', onMoveEvent, false);\n                window.addEventListener('touchend', onEndEvent, false);\n                window.addEventListener('touchcancel', onEndEvent, false);\n            }\n\n            list.el.on('mousedown', onStartEvent);\n            list.w.on('mousemove', onMoveEvent);\n            list.w.on('mouseup', onEndEvent);\n\n            var destroyNestable = function()\n            {\n                if (hasTouch) {\n                    list.el[0].removeEventListener('touchstart', onStartEvent, false);\n                    window.removeEventListener('touchmove', onMoveEvent, false);\n                    window.removeEventListener('touchend', onEndEvent, false);\n                    window.removeEventListener('touchcancel', onEndEvent, false);\n                }\n\n                list.el.off('mousedown', onStartEvent);\n                list.w.off('mousemove', onMoveEvent);\n                list.w.off('mouseup', onEndEvent);\n\n                list.el.off('click');\n                list.el.unbind('destroy-nestable');\n\n                list.el.data(\"nestable\", null);\n            };\n\n            list.el.bind('destroy-nestable', destroyNestable);\n\n        },\n\n        destroy: function ()\n        {\n            this.el.trigger('destroy-nestable');\n        },\n\n        add: function (item)\n        {\n            var listClassSelector = '.' + this.options.listClass;\n            var tree = $(this.el).children(listClassSelector);\n\n            if (item.parent_id !== undefined) {\n                tree = tree.find('[data-id=\"' + item.parent_id + '\"]');\n                delete item.parent_id;\n\n                if (tree.children(listClassSelector).length === 0) {\n                    tree = tree.append(this.options.listRenderer('', this.options));\n                }\n\n                tree = tree.find(listClassSelector + ':first');\n                this.setParent(tree.parent());\n            }\n\n            tree.append(this._buildItem(item, this.options));\n        },\n\n        replace: function (item)\n        {\n            var html = this._buildItem(item, this.options);\n\n            this._getItemById(item.id)\n                .replaceWith(html);\n        },\n\n        //removes item and additional elements from list\n        removeItem: function (item){\n            var opts = this.options,\n                el   = this.el;\n\n            // remove item\n            item = item || this;\n            item.remove();\n\n            // remove empty children lists\n            var emptyListsSelector = '.' + opts.listClass\n                + ' .' + opts.listClass + ':not(:has(*))';\n            $(el).find(emptyListsSelector).remove();\n\n            // remove buttons if parents do not have children\n            var buttonsSelector = '[data-action=\"expand\"], [data-action=\"collapse\"]';\n            $(el).find(buttonsSelector).each(function() {\n                var siblings = $(this).siblings('.' + opts.listClass);\n                if (siblings.length === 0) {\n                    $(this).remove();\n                }\n            });\n        },\n\n        //removes item by itemId and run callback at the end\n        remove: function (itemId, callback)\n        {\n            var opts = this.options;\n            var list = this;\n            var item = this._getItemById(itemId);\n\n            //animation style\n            var animation = opts.effect.animation || 'fade';\n\n            //animation time\n            var time = opts.effect.time || 'slow';\n\n            //add fadeOut effect when removing\n            if (animation === 'fade'){\n                item.fadeOut(time, function(){\n                    list.removeItem(item);\n                });\n            }\n            else {\n                this.removeItem(item);\n            }\n\n            if (callback) callback();\n        },\n\n        //removes all items from the list and run callback at the end\n        removeAll: function(callback){\n\n            var list  = this,\n                opts  = this.options,\n                node  = list.el.find(opts.listNodeName).first(),\n                items = node.children(opts.itemNodeName);\n\n            //animation style\n            var animation = opts.effect.animation || 'fade';\n\n            //animation time\n            var time = opts.effect.time || 'slow';\n\n            function remove(){\n                //Removes each item and its children.\n                items.each(function() {\n                    list.removeItem($(this));\n                });\n                //Now we can again show our node element\n                node.show();\n                if (callback) callback();\n            }\n\n            //add fadeOut effect when removing\n            if (animation === 'fade'){\n                node.fadeOut(time, remove);\n            }\n            else {\n                remove();\n            }\n        },\n\n        _getItemById: function(itemId) {\n            return $(this.el).children('.' + this.options.listClass)\n                .find('[data-id=\"' + itemId + '\"]');\n        },\n\n        _build: function() {\n            var json = this.options.json;\n\n            if (typeof json === 'string') {\n                json = JSON.parse(json);\n            }\n\n            $(this.el).html(this._buildList(json, this.options));\n        },\n\n        _buildList: function(items, options) {\n            if (!items) {\n                return '';\n            }\n\n            var children = '';\n            var that = this;\n\n            $.each(items, function(index, sub) {\n                children += that._buildItem(sub, options);\n            });\n\n            return options.listRenderer(children, options);\n        },\n\n        _buildItem: function(item, options) {\n            function escapeHtml(text) {\n                var map = {\n                    '&': '&amp;',\n                    '<': '&lt;',\n                    '>': '&gt;',\n                    '\"': '&quot;',\n                    \"'\": '&#039;'\n                };\n\n                return text + \"\".replace(/[&<>\"']/g, function(m) { return map[m]; });\n            }\n\n            function filterClasses(classes) {\n                var new_classes = {};\n\n                for (var k in classes) {\n                    // Remove duplicates\n                    new_classes[classes[k]] = classes[k];\n                }\n\n                return new_classes;\n            }\n\n            function createClassesString(item, options) {\n                var classes = item.classes || {};\n\n                if (typeof classes === 'string') {\n                    classes = [classes];\n                }\n\n                var item_classes = filterClasses(classes);\n                item_classes[options.itemClass] = options.itemClass;\n\n                // create class string\n                return $.map(item_classes, function(val) {\n                    return val;\n                }).join(' ');\n            }\n\n            function createDataAttrs(attr) {\n                attr = $.extend({}, attr);\n\n                delete attr.children;\n                delete attr.classes;\n                delete attr.content;\n\n                var data_attrs = {};\n\n                $.each(attr, function(key, value) {\n                    if (typeof value === 'object') {\n                        value = JSON.stringify(value);\n                    }\n\n                    data_attrs[\"data-\" + key] = escapeHtml(value);\n                });\n\n                return data_attrs;\n            }\n\n            var item_attrs = createDataAttrs(item);\n            item_attrs[\"class\"] = createClassesString(item, options);\n\n            var content = options.contentCallback(item);\n            var children = this._buildList(item.children, options);\n            var html = $(options.itemRenderer(item_attrs, content, children, options, item));\n\n            this.setParent(html);\n\n            return html[0].outerHTML;\n        },\n\n        serialize: function() {\n            var data, list = this, step = function(level) {\n                var array = [],\n                    items = level.children(list.options.itemNodeName);\n                items.each(function() {\n                    var li = $(this),\n                        item = $.extend({}, li.data()),\n                        sub = li.children(list.options.listNodeName);\n\n                    if (list.options.includeContent) {\n                        var content = li.find('.' + list.options.contentClass).html();\n\n                        if (content) {\n                            item.content = content;\n                        }\n                    }\n\n                    if (sub.length) {\n                        item.children = step(sub);\n                    }\n                    array.push(item);\n                });\n                return array;\n            };\n            data = step(list.el.find(list.options.listNodeName).first());\n            return data;\n        },\n\n        asNestedSet: function() {\n            var list = this, o = list.options, depth = -1, ret = [], lft = 1;\n            var items = list.el.find(o.listNodeName).first().children(o.itemNodeName);\n\n            items.each(function () {\n                lft = traverse(this, depth + 1, lft);\n            });\n\n            ret = ret.sort(function(a,b){ return (a.lft - b.lft); });\n            return ret;\n\n            function traverse(item, depth, lft) {\n                var rgt = lft + 1, id, pid;\n\n                if ($(item).children(o.listNodeName).children(o.itemNodeName).length > 0 ) {\n                    depth++;\n                    $(item).children(o.listNodeName).children(o.itemNodeName).each(function () {\n                        rgt = traverse($(this), depth, rgt);\n                    });\n                    depth--;\n                }\n\n                id = $(item).attr('data-id');\n                if (isInt(id)) {\n                    id = parseInt(id);\n                }\n\n                pid = $(item).parent(o.listNodeName).parent(o.itemNodeName).attr('data-id') || '';\n                if (isInt(pid)) {\n                    id = parseInt(pid);\n                }\n\n                if (id) {\n                    ret.push({\"id\": id, \"parent_id\": pid, \"depth\": depth, \"lft\": lft, \"rgt\": rgt});\n                }\n\n                lft = rgt + 1;\n                return lft;\n            }\n\n            function isInt(value) {\n                return $.isNumeric(value) && Math.floor(value) == value;\n            }\n        },\n\n        returnOptions: function() {\n            return this.options;\n        },\n\n        serialise: function() {\n            return this.serialize();\n        },\n\n        toHierarchy: function(options) {\n\n            var o = $.extend({}, this.options, options),\n                ret = [];\n\n            $(this.element).children(o.items).each(function() {\n                var level = _recursiveItems(this);\n                ret.push(level);\n            });\n\n            return ret;\n\n            function _recursiveItems(item) {\n                var id = ($(item).attr(o.attribute || 'id') || '').match(o.expression || (/(.+)[-=_](.+)/));\n                if (id) {\n                    var currentItem = {\n                        \"id\": id[2]\n                    };\n                    if ($(item).children(o.listType).children(o.items).length > 0) {\n                        currentItem.children = [];\n                        $(item).children(o.listType).children(o.items).each(function() {\n                            var level = _recursiveItems(this);\n                            currentItem.children.push(level);\n                        });\n                    }\n                    return currentItem;\n                }\n            }\n        },\n\n        toArray: function() {\n\n            var o = $.extend({}, this.options, this),\n                sDepth = o.startDepthCount || 0,\n                ret = [],\n                left = 2,\n                list = this,\n                element = list.el.find(list.options.listNodeName).first();\n\n            var items = element.children(list.options.itemNodeName);\n            items.each(function() {\n                left = _recursiveArray($(this), sDepth + 1, left);\n            });\n\n            ret = ret.sort(function(a, b) {\n                return (a.left - b.left);\n            });\n\n            return ret;\n\n            function _recursiveArray(item, depth, left) {\n\n                var right = left + 1,\n                    id,\n                    pid;\n\n                if (item.children(o.options.listNodeName).children(o.options.itemNodeName).length > 0) {\n                    depth++;\n                    item.children(o.options.listNodeName).children(o.options.itemNodeName).each(function() {\n                        right = _recursiveArray($(this), depth, right);\n                    });\n                    depth--;\n                }\n\n                id = item.data().id;\n\n\n                if (depth === sDepth + 1) {\n                    pid = o.rootID;\n                } else {\n\n                    var parentItem = (item.parent(o.options.listNodeName)\n                        .parent(o.options.itemNodeName)\n                        .data());\n                    pid = parentItem.id;\n\n                }\n\n                if (id) {\n                    ret.push({\n                        \"id\": id,\n                        \"parent_id\": pid,\n                        \"depth\": depth,\n                        \"left\": left,\n                        \"right\": right\n                    });\n                }\n\n                left = right + 1;\n                return left;\n            }\n\n        },\n\n        reset: function() {\n            this.mouse = {\n                offsetX: 0,\n                offsetY: 0,\n                startX: 0,\n                startY: 0,\n                lastX: 0,\n                lastY: 0,\n                nowX: 0,\n                nowY: 0,\n                distX: 0,\n                distY: 0,\n                dirAx: 0,\n                dirX: 0,\n                dirY: 0,\n                lastDirX: 0,\n                lastDirY: 0,\n                distAxX: 0,\n                distAxY: 0\n            };\n            this.isTouch = false;\n            this.moving = false;\n            this.dragEl = null;\n            this.dragRootEl = null;\n            this.dragDepth = 0;\n            this.hasNewRoot = false;\n            this.pointEl = null;\n        },\n\n        expandItem: function(li) {\n            li.removeClass(this.options.collapsedClass);\n        },\n\n        collapseItem: function(li) {\n            var lists = li.children(this.options.listNodeName);\n            if (lists.length) {\n                li.addClass(this.options.collapsedClass);\n            }\n        },\n\n        expandAll: function() {\n            var list = this;\n            list.el.find(list.options.itemNodeName).each(function() {\n                list.expandItem($(this));\n            });\n        },\n\n        collapseAll: function() {\n            var list = this;\n            list.el.find(list.options.itemNodeName).each(function() {\n                list.collapseItem($(this));\n            });\n        },\n\n        setParent: function(li) {\n            //Check if li is an element of itemNodeName type and has children\n            if (li.is(this.options.itemNodeName) && li.children(this.options.listNodeName).length) {\n                // make sure NOT showing two or more sets data-action buttons\n                li.children('[data-action]').remove();\n                li.prepend($(this.options.expandBtnHTML));\n                li.prepend($(this.options.collapseBtnHTML));\n            }\n        },\n\n        unsetParent: function(li) {\n            li.removeClass(this.options.collapsedClass);\n            li.children('[data-action]').remove();\n            li.children(this.options.listNodeName).remove();\n        },\n\n        dragStart: function(e) {\n            var mouse = this.mouse,\n                target = $(e.target),\n                dragItem = target.closest(this.options.itemNodeName),\n                position = {\n                    top  : e.pageY,\n                    left : e.pageX\n                };\n\n            var continueExecution = this.options.onDragStart.call(this, this.el, dragItem, position);\n\n            if (typeof continueExecution !== 'undefined' && continueExecution === false) {\n                return;\n            }\n\n            this.placeEl.css('height', dragItem.height());\n\n            mouse.offsetX = e.pageX - dragItem.offset().left;\n            mouse.offsetY = e.pageY - dragItem.offset().top;\n            mouse.startX = mouse.lastX = e.pageX;\n            mouse.startY = mouse.lastY = e.pageY;\n\n            this.dragRootEl = this.el;\n            this.dragEl = $(document.createElement(this.options.listNodeName)).addClass(this.options.listClass + ' ' + this.options.dragClass);\n            this.dragEl.css('width', dragItem.outerWidth());\n\n            this.setIndexOfItem(dragItem);\n\n            // fix for zepto.js\n            //dragItem.after(this.placeEl).detach().appendTo(this.dragEl);\n            dragItem.after(this.placeEl);\n            dragItem[0].parentNode.removeChild(dragItem[0]);\n            dragItem.appendTo(this.dragEl);\n\n            $(document.body).append(this.dragEl);\n            this.dragEl.css({\n                'left': e.pageX - mouse.offsetX,\n                'top': e.pageY - mouse.offsetY\n            });\n            // total depth of dragging item\n            var i, depth,\n                items = this.dragEl.find(this.options.itemNodeName);\n            for (i = 0; i < items.length; i++) {\n                depth = $(items[i]).parents(this.options.listNodeName).length;\n                if (depth > this.dragDepth) {\n                    this.dragDepth = depth;\n                }\n            }\n        },\n\n        //Create sublevel.\n        //  element : element which become parent\n        //  item    : something to place into new sublevel\n        createSubLevel: function(element, item) {\n            var list = $('<' + this.options.listNodeName + '/>').addClass(this.options.listClass);\n            if (item) list.append(item);\n            element.append(list);\n            this.setParent(element);\n            return list;\n        },\n\n        setIndexOfItem: function(item, index) {\n            index = index || [];\n\n            index.unshift(item.index());\n\n            if ($(item[0].parentNode)[0] !== this.dragRootEl[0]) {\n                this.setIndexOfItem($(item[0].parentNode), index);\n            }\n            else {\n                this.dragEl.data('indexOfItem', index);\n            }\n        },\n\n        restoreItemAtIndex: function(dragElement, indexArray) {\n            var currentEl = this.el,\n                lastIndex = indexArray.length - 1;\n\n            //Put drag element at current element position.\n            function placeElement(currentEl, dragElement) {\n                if (indexArray[lastIndex] === 0) {\n                    $(currentEl).prepend(dragElement.clone(true)); //using true saves added to element events.\n                }\n                else {\n                    $(currentEl.children[indexArray[lastIndex] - 1]).after(dragElement.clone(true)); //using true saves added to element events.\n                }\n            }\n            //Diggin through indexArray to get home for dragElement.\n            for (var i = 0; i < indexArray.length; i++) {\n                if (lastIndex === parseInt(i)) {\n                    placeElement(currentEl, dragElement);\n                    return;\n                }\n                //element can have no indexes, so we have to use conditional here to avoid errors.\n                //if element doesn't exist we defenetly need to add new list.\n                var element = (currentEl[0]) ? currentEl[0] : currentEl;\n                var nextEl  = element.children[indexArray[i]];\n                currentEl   = (!nextEl) ? this.createSubLevel($(element)) : nextEl;\n            }\n        },\n\n        dragStop: function(e) {\n            // fix for zepto.js\n            //this.placeEl.replaceWith(this.dragEl.children(this.options.itemNodeName + ':first').detach());\n            var position = {\n                top  : e.pageY,\n                left : e.pageX\n            };\n            //Get indexArray of item at drag start.\n            var srcIndex = this.dragEl.data('indexOfItem');\n\n            var el = this.dragEl.children(this.options.itemNodeName).first();\n\n            el[0].parentNode.removeChild(el[0]);\n\n            this.dragEl.remove(); //Remove dragEl, cause it can affect on indexing in html collection.\n\n            //Before drag stop callback\n            var continueExecution = this.options.beforeDragStop.call(this, this.el, el, this.placeEl.parent());\n            if (typeof continueExecution !== 'undefined' && continueExecution === false) {\n                var parent = this.placeEl.parent();\n                this.placeEl.remove();\n                if (!parent.children().length) {\n                    this.unsetParent(parent.parent());\n                }\n                this.restoreItemAtIndex(el, srcIndex);\n                this.reset();\n                return;\n            }\n\n            this.placeEl.replaceWith(el);\n\n            if (this.hasNewRoot) {\n                if (this.options.fixed === true) {\n                    this.restoreItemAtIndex(el, srcIndex);\n                }\n                else {\n                    this.el.trigger('lostItem');\n                }\n                this.dragRootEl.trigger('gainedItem');\n            }\n            else {\n                this.dragRootEl.trigger('change');\n            }\n\n            this.options.callback.call(this, this.dragRootEl, el, position);\n\n            this.reset();\n        },\n\n        dragMove: function(e) {\n            var list, parent, prev, next, depth,\n                opt = this.options,\n                mouse = this.mouse;\n\n            this.dragEl.css({\n                'left': e.pageX - mouse.offsetX,\n                'top': e.pageY - mouse.offsetY\n            });\n\n            // mouse position last events\n            mouse.lastX = mouse.nowX;\n            mouse.lastY = mouse.nowY;\n            // mouse position this events\n            mouse.nowX = e.pageX;\n            mouse.nowY = e.pageY;\n            // distance mouse moved between events\n            mouse.distX = mouse.nowX - mouse.lastX;\n            mouse.distY = mouse.nowY - mouse.lastY;\n            // direction mouse was moving\n            mouse.lastDirX = mouse.dirX;\n            mouse.lastDirY = mouse.dirY;\n            // direction mouse is now moving (on both axis)\n            mouse.dirX = mouse.distX === 0 ? 0 : mouse.distX > 0 ? 1 : -1;\n            mouse.dirY = mouse.distY === 0 ? 0 : mouse.distY > 0 ? 1 : -1;\n            // axis mouse is now moving on\n            var newAx = Math.abs(mouse.distX) > Math.abs(mouse.distY) ? 1 : 0;\n\n            // do nothing on first move\n            if (!mouse.moving) {\n                mouse.dirAx = newAx;\n                mouse.moving = true;\n                return;\n            }\n\n            // do scrolling if enable\n            if (opt.scroll) {\n                if (typeof window.jQuery.fn.scrollParent !== 'undefined') {\n                    var scrolled = false;\n                    var scrollParent = this.el.scrollParent()[0];\n                    if (scrollParent !== document && scrollParent.tagName !== 'HTML') {\n                        if ((opt.scrollTriggers.bottom + scrollParent.offsetHeight) - e.pageY < opt.scrollSensitivity)\n                            scrollParent.scrollTop = scrolled = scrollParent.scrollTop + opt.scrollSpeed;\n                        else if (e.pageY - opt.scrollTriggers.top < opt.scrollSensitivity)\n                            scrollParent.scrollTop = scrolled = scrollParent.scrollTop - opt.scrollSpeed;\n\n                        if ((opt.scrollTriggers.right + scrollParent.offsetWidth) - e.pageX < opt.scrollSensitivity)\n                            scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + opt.scrollSpeed;\n                        else if (e.pageX - opt.scrollTriggers.left < opt.scrollSensitivity)\n                            scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - opt.scrollSpeed;\n                    } else {\n                        if (e.pageY - $(document).scrollTop() < opt.scrollSensitivity)\n                            scrolled = $(document).scrollTop($(document).scrollTop() - opt.scrollSpeed);\n                        else if ($(window).height() - (e.pageY - $(document).scrollTop()) < opt.scrollSensitivity)\n                            scrolled = $(document).scrollTop($(document).scrollTop() + opt.scrollSpeed);\n\n                        if (e.pageX - $(document).scrollLeft() < opt.scrollSensitivity)\n                            scrolled = $(document).scrollLeft($(document).scrollLeft() - opt.scrollSpeed);\n                        else if ($(window).width() - (e.pageX - $(document).scrollLeft()) < opt.scrollSensitivity)\n                            scrolled = $(document).scrollLeft($(document).scrollLeft() + opt.scrollSpeed);\n                    }\n                } else {\n                    console.warn('To use scrolling you need to have scrollParent() function, check documentation for more information');\n                }\n            }\n\n            if (this.scrollTimer) {\n                clearTimeout(this.scrollTimer);\n            }\n\n            if (opt.scroll && scrolled) {\n                this.scrollTimer = setTimeout(function() {\n                    $(window).trigger(e);\n                }, 10);\n            }\n\n            // calc distance moved on this axis (and direction)\n            if (mouse.dirAx !== newAx) {\n                mouse.distAxX = 0;\n                mouse.distAxY = 0;\n            }\n            else {\n                mouse.distAxX += Math.abs(mouse.distX);\n                if (mouse.dirX !== 0 && mouse.dirX !== mouse.lastDirX) {\n                    mouse.distAxX = 0;\n                }\n                mouse.distAxY += Math.abs(mouse.distY);\n                if (mouse.dirY !== 0 && mouse.dirY !== mouse.lastDirY) {\n                    mouse.distAxY = 0;\n                }\n            }\n            mouse.dirAx = newAx;\n\n            /**\n             * move horizontal\n             */\n            if (mouse.dirAx && mouse.distAxX >= opt.threshold) {\n                // reset move distance on x-axis for new phase\n                mouse.distAxX = 0;\n                prev = this.placeEl.prev(opt.itemNodeName);\n                // increase horizontal level if previous sibling exists, is not collapsed, and can have children\n                if (mouse.distX > 0 && prev.length && !prev.hasClass(opt.collapsedClass) && !prev.hasClass(opt.noChildrenClass)) {\n                    // cannot increase level when item above is collapsed\n                    list = prev.find(opt.listNodeName).last();\n                    // check if depth limit has reached\n                    depth = this.placeEl.parents(opt.listNodeName).length;\n                    if (depth + this.dragDepth <= opt.maxDepth) {\n                        // create new sub-level if one doesn't exist\n                        if (!list.length) {\n                            this.createSubLevel(prev, this.placeEl);\n                        }\n                        else {\n                            // else append to next level up\n                            list = prev.children(opt.listNodeName).last();\n                            list.append(this.placeEl);\n                        }\n                    }\n                }\n                // decrease horizontal level\n                if (mouse.distX < 0) {\n                    // we can't decrease a level if an item preceeds the current one\n                    next = this.placeEl.next(opt.itemNodeName);\n                    if (!next.length) {\n                        parent = this.placeEl.parent();\n                        this.placeEl.closest(opt.itemNodeName).after(this.placeEl);\n                        if (!parent.children().length) {\n                            this.unsetParent(parent.parent());\n                        }\n                    }\n                }\n            }\n\n            var isEmpty = false;\n\n            // find list item under cursor\n            if (!hasPointerEvents) {\n                this.dragEl[0].style.visibility = 'hidden';\n            }\n            this.pointEl = $(document.elementFromPoint(e.pageX - document.body.scrollLeft, e.pageY - (window.pageYOffset || document.documentElement.scrollTop)));\n            if (!hasPointerEvents) {\n                this.dragEl[0].style.visibility = 'visible';\n            }\n            if (this.pointEl.hasClass(opt.handleClass)) {\n                this.pointEl = this.pointEl.closest(opt.itemNodeName);\n            }\n            if (this.pointEl.hasClass(opt.emptyClass)) {\n                isEmpty = true;\n            }\n            else if (!this.pointEl.length || !this.pointEl.hasClass(opt.itemClass)) {\n                return;\n            }\n\n            // find parent list of item under cursor\n            var pointElRoot = this.pointEl.closest('.' + opt.rootClass),\n                isNewRoot = this.dragRootEl.data('nestable-id') !== pointElRoot.data('nestable-id');\n\n            /**\n             * move vertical\n             */\n            if (!mouse.dirAx || isNewRoot || isEmpty) {\n                // check if groups match if dragging over new root\n                if (isNewRoot && opt.group !== pointElRoot.data('nestable-group')) {\n                    return;\n                }\n\n                // fixed item's depth, use for some list has specific type, eg:'Volume, Section, Chapter ...'\n                if (this.options.fixedDepth && this.dragDepth + 1 !== this.pointEl.parents(opt.listNodeName).length) {\n                    return;\n                }\n\n                // check depth limit\n                depth = this.dragDepth - 1 + this.pointEl.parents(opt.listNodeName).length;\n                if (depth > opt.maxDepth) {\n                    return;\n                }\n                var before = e.pageY < (this.pointEl.offset().top + this.pointEl.height() / 2);\n                parent = this.placeEl.parent();\n                // if empty create new list to replace empty placeholder\n                if (isEmpty) {\n                    list = $(document.createElement(opt.listNodeName)).addClass(opt.listClass);\n                    list.append(this.placeEl);\n                    this.pointEl.replaceWith(list);\n                }\n                else if (before) {\n                    this.pointEl.before(this.placeEl);\n                }\n                else {\n                    this.pointEl.after(this.placeEl);\n                }\n                if (!parent.children().length) {\n                    this.unsetParent(parent.parent());\n                }\n                if (!this.dragRootEl.find(opt.itemNodeName).length) {\n                    this.appendEmptyElement(this.dragRootEl);\n                }\n                // parent root list has changed\n                this.dragRootEl = pointElRoot;\n                if (isNewRoot) {\n                    this.hasNewRoot = this.el[0] !== this.dragRootEl[0];\n                }\n            }\n        },\n\n        // Append the .dd-empty div to the list so it can be populated and styled\n        appendEmptyElement: function(element) {\n            element.append('<div class=\"' + this.options.emptyClass + '\"/>');\n        }\n    };\n\n    $.fn.nestable = function(params) {\n        var lists  = this,\n            retval = this,\n            args   = arguments;\n\n        if (!('Nestable' in window)) {\n            window.Nestable = {};\n            Nestable.counter = 0;\n        }\n\n        lists.each(function() {\n            var plugin = $(this).data(\"nestable\");\n\n            if (!plugin) {\n                Nestable.counter++;\n                $(this).data(\"nestable\", new Plugin(this, params));\n                $(this).data(\"nestable-id\", Nestable.counter);\n            }\n            else {\n                if (typeof params === 'string' && typeof plugin[params] === 'function') {\n                    if (args.length > 1){\n                        var pluginArgs = [];\n                        for (var i = 1; i < args.length; i++) {\n                            pluginArgs.push(args[i]);\n                        }\n                        retval = plugin[params].apply(plugin, pluginArgs);\n                    }\n                    else {\n                        retval = plugin[params]();\n                    }\n                }\n            }\n        });\n\n        return retval || lists;\n    };\n\n})(window.jQuery || window.Zepto, window, document);\n"],"sourceRoot":""}