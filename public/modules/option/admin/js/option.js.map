{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./Modules/Option/Resources/assets/admin/js/BaseOption.js","webpack:///./Modules/Option/Resources/assets/admin/js/Option.js","webpack:///./Modules/Option/Resources/assets/admin/js/ProductOption.js","webpack:///./Modules/Option/Resources/assets/admin/js/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","errors","inputField","this","getInputFieldForErrorKey","closest","addClass","parent","append","data","template","_","$","html","optionId","type","values","optionValuesElement","getOptionValuesElement","templateType","getTemplateType","optionValuesData","id","label","price","price_type","shouldNotChangeTemplate","length","addOptionRowEventListener","addOptionRows","getAddNewRowButton","trigger","entries","index","addOptionRow","valueId","templateTypeIsText","templateTypeIsSelect","includes","undefined","alreadyHasCurrentTemplate","children","hasClass","selectValues","is","makeSortable","deleteOptionRowEventListener","window","admin","tooltip","row","find","on","e","currentTarget","remove","el","Sortable","handle","animation","FleetCart","removeSubmitButtonOffsetOn","getRowTemplate","keyParts","split","map","k","join","BaseOption","optionsCount","addOptions","addOption","collapseOptions","addGlobalOption","options","option","globalOptionId","val","stopButtonLoading","ajax","url","route","dataType","success","is_required","JSON","parse","setTimeout","text","optionGroup","deleteOptionEventListener","updateOptionNameEventListener","updateTemplateEventListener","old","optionTypeElement","shift","Option","ProductOption"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,IAIjBlC,EAAoBA,EAAoBmC,EAAI,K,g7BCjFhCC,GACb,IAAK,IAAIT,KAAOS,EAAQ,CACpB,IAAIC,EAAaC,KAAKC,yBAAyBZ,GAE/CU,EAAWG,QAAQ,WAAWC,SAAS,qBAE1BJ,EAAWK,SAEjBC,OAAP,mCAA0CP,EAAOT,GAAK,GAAtD,e,qCAIOiB,GACX,IAAIC,EAAWC,EAAED,SAASE,EAAE,kCAAkCC,QAE9D,OAAOD,EAAEF,EAASD,M,0CAG4B,IAA/BK,EAA+B,EAA/BA,SAAUC,EAAqB,EAArBA,KAAqB,IAAfC,cAAe,MAAN,GAAM,EAC1CC,EAAsBd,KAAKe,uBAAuBJ,GAClDK,EAAehB,KAAKiB,gBAAgBL,EAAME,GAC1CI,EAAmB,CAAEP,WAAU5B,MAAO,CAAEoC,GAAI,GAAIC,MAAO,GAAIC,MAAO,GAAIC,WAAY,UAEtF,IAAItB,KAAKuB,wBAAwBP,EAAcF,GAA/C,CAIsB,IAAlBD,EAAOW,QAAiC,SAAjBR,IACvBE,EAAiBnC,MAAQ8B,EAAO,IAGpC,IAAIN,EAAWC,EAAED,SAASE,EAAE,WAAD,OAAYO,EAAZ,cAAqCN,QAEhEI,EAAoBJ,KAAKH,EAASW,IAEb,WAAjBF,IACAhB,KAAKyB,0BAA0Bd,GAE/BX,KAAK0B,cAAc,CAAEf,WAAUE,WAET,IAAlBA,EAAOW,QACPxB,KAAK2B,mBAAmBhB,GAAUiB,QAAQ,a,uCAKlB,IAApBjB,EAAoB,EAApBA,SAAUE,EAAU,EAAVA,OAAU,uBAChC,YAA2BA,EAAOgB,UAAlC,+CAA6C,oBAAnCC,EAAmC,KAA5B/C,EAA4B,KACzCiB,KAAK+B,aAAa,CACdpB,WACAqB,QAASF,EACT/C,WALwB,qF,sCAUpB6B,GACZ,OAAIZ,KAAKiC,mBAAmBrB,GACjB,OAGPZ,KAAKkC,qBAAqBtB,GACnB,cADX,I,yCAKeA,GACf,MAAO,CAAC,QAAS,WAAY,OAAQ,YAAa,QAAQuB,SAASvB,K,2CAGlDA,GACjB,MAAO,CAAC,WAAY,WAAY,kBAAmB,QAAS,eAAgB,mBAAmBuB,SAASvB,K,8CAGpFI,EAAcF,GAClC,YAAwBsB,IAAjBpB,GAA8BhB,KAAKqC,0BAA0BrB,EAAcF,K,gDAG5DE,EAAcF,GACpC,MAAqB,SAAjBE,EACOF,EAAoBwB,WAAWC,SAAS,eAG9B,WAAjBvB,EACOF,EAAoBwB,WAAWC,SAAS,sBADnD,I,oCAKUhC,EAAUiC,GACQ,IAAxBA,EAAahB,QAAkBgB,EAAaC,GAAG,eAC/CzC,KAAK0C,aAAaF,EAAa,IAE/BA,EAAarC,SAAS,aAG1BH,KAAK2C,6BAA6BpC,GAElCqC,OAAOC,MAAMC,Y,mDAGYC,GACzBA,EAAIC,KAAK,eAAeC,GAAG,SAAS,SAACC,GACjCzC,EAAEyC,EAAEC,eAAejD,QAAQ,eAAekD,c,mCAIrCC,GACTC,SAASlE,OAAOiE,EAAI,CAChBE,OAAQ,aACRC,UAAW,W,4jCC3GnB,aAAc,M,iGAAA,S,EACV,K,EAAA,mB,gDAEA,IAAI3C,EAAS4C,UAAUnD,KAAK,iBAHlB,OAKVG,EAAE,SAASwC,GAAG,UAAU,SAACC,GACrB,oDAAuB,CAAEtC,KAAMsC,EAAEC,cAAcpE,MAAO8B,WACtD,oDAAuB4C,UAAU3D,OAAO,qBAG5CW,EAAE,SAASmB,QAAQ,UAEnBgB,OAAOC,MAAMa,2BAA2B,WAZ9B,E,uSAemE,IAAlE1B,EAAkE,EAAlEA,QAAkE,IAAzDjD,aAAyD,MAAjD,CAAEqC,MAAO,GAAIC,MAAO,GAAIC,WAAY,SAAa,EACzEf,EAAWP,KAAK2D,eAAe,CAAEhD,cAAUyB,EAAWJ,UAASjD,UAE/DyD,EAAe/B,EAAE,kBAAkBJ,OAAOE,GAE9C,iDAAoBA,EAAUiC,K,kDAGN,WACxB/B,EAAE,gBAAgBwC,GAAG,SAAS,WAC1B,IAAIjB,EAAUvB,EAAE,8BAA8Be,OAE9C,EAAKO,aAAa,CAAEC,iB,+CAKxB,OAAOvB,EAAE,oB,2CAIT,OAAOA,EAAE,kB,+CAGYpB,GACrB,IAAIuE,EAAWvE,EAAIwE,MAAM,KAOzB,OAJAD,EAAWA,EAASE,KAAI,SAAAC,GACpB,OAAOA,EAAEF,MAAM,KAAKG,KAAK,QAGtBvD,EAAE,IAAD,OAAKmD,EAASI,KAAK,Y,8BAhDNC,G,4hCCCzB,aAAc,M,IAAA,O,4FAAA,S,EACV,K,EAAA,oB,iDAEKC,aAAe,EAEpB,EAAKC,WAAWV,UAAUnD,KAAK,oBAEL,IAAtB,EAAK4D,cACL,EAAKE,YAGL,EAAKF,aAAe,GACpB,EAAKG,kBAGT,oDAAuBZ,UAAU3D,OAAO,oBAExCW,EAAE,mBAAmBwC,GAAG,SAAS,kBAAM,EAAKmB,eAC5C3D,EAAE,sBAAsBwC,GAAG,SAAS,kBAAM,EAAKqB,qBAlBrC,E,kSAqBHC,GAAS,2BAChB,YAAmBA,EAAnB,+CAA4B,KAAnBC,EAAmB,QACxBxE,KAAKoE,UAAUI,IAFH,qF,wCAOhB,IAAID,EAAU9D,EAAE,mCADF,uBAGd,YAAmB8D,EAAnB,+CAA4B,KAAnBC,EAAmB,QACxB/D,EAAE+D,GAAQxB,KAAK,0BAA0BpB,QAAQ,UAJvC,qF,wCAQA,WACV6C,EAAiBhE,EAAE,kBAAkBiE,MAEzC,GAAuB,KAAnBD,EACA,OAAO7B,OAAOC,MAAM8B,kBAAkBlE,EAAE,uBAG5CA,EAAEmE,KAAK,CACHhE,KAAM,MACNiE,IAAKC,MAAM,qBAAsBL,GACjCM,SAAU,OACVC,QAAS,SAAAR,GACL,EAAKJ,UAAUI,GAEf5B,OAAOC,MAAM8B,kBAAkBlE,EAAE,4B,kCAK4C,IAA/E+D,EAA+E,uDAAtE,CAAErD,GAAI,KAAM9C,KAAM,KAAMuC,KAAM,KAAMqE,aAAa,EAAOpE,OAAQ,IAE/E2D,EAAOS,cAAiBC,KAAKC,MAAMX,EAAOS,aAE1C,IAAItE,EAAWX,KAAKkE,aAEhB3D,EAAWC,EAAED,SAASE,EAAE,oBAAoBC,QAC5CA,EAAOD,EAAEF,EAAS,CAAEiE,SAAQ7D,cAEZ,OAAhB6D,EAAOnG,MACP+G,YAAW,WACP3E,EAAE,WAAD,OAAYE,IAAYqC,KAAK,gBAAgBqC,KAAKb,EAAOnG,SAIlE,IAAIiH,EAAc7E,EAAE,kBAAkBJ,OAAOK,GAEvC4E,EAAY7C,GAAG,eACjB,gDAAmB6C,EAAY,IAE/BA,EAAYnF,SAAS,aAGzBH,KAAKuF,0BAA0B7E,GAC/BV,KAAKwF,8BAA8B7E,GACnCX,KAAKyF,4BAA4B9E,EAAU6D,EAAM,QAEjD5B,OAAOC,MAAMC,UAEb9C,KAAKkE,iB,gDAGiBM,GACtBA,EAAOxB,KAAK,kBAAkBC,GAAG,SAAS,SAACC,GAAD,OAAOzC,EAAEyC,EAAEC,eAAejD,QAAQ,WAAWkD,c,oDAG7DzC,GAC1B,IAAI6D,EAAS/D,EAAE,WAAD,OAAYE,IACtB+E,EAAMlB,EAAOxB,KAAK,gBAAgBqC,OAEtC5E,EAAE+D,GAAQxB,KAAK,sBAAsBC,GAAG,SAAS,SAACC,GAC9C,IAAI7E,EAAiC,KAA1B6E,EAAEC,cAAcpE,MAAemE,EAAEC,cAAcpE,MAAQ2G,EAElElB,EAAOxB,KAAK,gBAAgBqC,KAAKhH,Q,kDAIbsC,GAAuB,WAAbE,EAAa,uDAAJ,GACvC8E,EAAoBlF,EAAE,WAAD,OAAYE,EAAZ,UAEzBgF,EAAkB1C,GAAG,UAAU,SAACC,GAC5B,IAAItC,EAAOsC,EAAEC,cAAcpE,MAE3B,GAAa,KAAT6B,EACA,OAAO,EAAKG,uBAAuBJ,GAAUD,KAAK,IAGtD,8CAAuB,CAAEC,WAAUC,OAAMC,cAM7C8E,EAAkB/D,QAAQ,Y,sCAG6D,IAA5EjB,EAA4E,EAA5EA,SAAUqB,EAAkE,EAAlEA,QAAkE,IAAzDjD,aAAyD,MAAjD,CAAEqC,MAAO,GAAIC,MAAO,GAAIC,WAAY,SAAa,EACnFf,EAAWP,KAAK2D,eAAe,CAAEhD,WAAUqB,UAASjD,UAEpDyD,EAAe/B,EAAE,WAAD,OAAYE,EAAZ,mBAAsCN,OAAOE,GAEjE,iDAAoBA,EAAUiC,K,gDAGR7B,GAAU,WAChCF,EAAE,WAAD,OAAYE,EAAZ,iBAAoCsC,GAAG,SAAS,WAC7C,IAAIjB,EAAUvB,EAAE,WAAD,OAAYE,EAAZ,wBAA2Ca,OAE1D,EAAKO,aAAa,CAAEpB,WAAUqB,iB,6CAIfrB,GACnB,OAAOF,EAAE,WAAD,OAAYE,EAAZ,c,yCAGOA,GACf,OAAOF,EAAE,WAAD,OAAYE,EAAZ,mB,+CAGatB,GACrB,IAAIuE,EAAWvE,EAAIwE,MAAM,KAUzB,OAPAD,EAASgC,QAGThC,EAAWA,EAASE,KAAI,SAAAC,GACpB,OAAOA,EAAEF,MAAM,KAAKG,KAAK,QAGtBvD,EAAE,WAAD,OAAYmD,EAASI,KAAK,Y,8BA5JbC,GCC8B,IAAvDxD,EAAE,0CAA0Ce,QAC5C,IAAIqE,EAGqD,IAAzDpF,EAAE,4CAA4Ce,QAC9C,IAAIsE","file":"/Modules/Option/Assets/admin/js/option.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 243);\n","export default class {\n    addOptionsErrors(errors) {\n        for (let key in errors) {\n            let inputField = this.getInputFieldForErrorKey(key);\n\n            inputField.closest('.option').addClass('option-has-errors');\n\n            let parent = inputField.parent();\n\n            parent.append(`<span class=\"help-block\">${errors[key][0]}</span>`);\n        }\n    }\n\n    getRowTemplate(data) {\n        let template = _.template($('#option-select-values-template').html());\n\n        return $(template(data));\n    }\n\n    changeOptionType({ optionId, type, values = [] }) {\n        let optionValuesElement = this.getOptionValuesElement(optionId);\n        let templateType = this.getTemplateType(type, optionValuesElement);\n        let optionValuesData = { optionId, value: { id: '', label: '', price: '', price_type: 'fixed' } };\n\n        if (this.shouldNotChangeTemplate(templateType, optionValuesElement)) {\n            return;\n        }\n\n        if (values.length !== 0 && templateType === 'text') {\n            optionValuesData.value = values[0];\n        }\n\n        let template = _.template($(`#option-${templateType}-template`).html());\n\n        optionValuesElement.html(template(optionValuesData));\n\n        if (templateType === 'select') {\n            this.addOptionRowEventListener(optionId);\n\n            this.addOptionRows({ optionId, values });\n\n            if (values.length === 0) {\n                this.getAddNewRowButton(optionId).trigger('click');\n            }\n        }\n    }\n\n    addOptionRows({ optionId, values }) {\n        for (let [index, value] of values.entries()) {\n            this.addOptionRow({\n                optionId,\n                valueId: index,\n                value,\n            });\n        }\n    }\n\n    getTemplateType(type) {\n        if (this.templateTypeIsText(type)) {\n            return 'text';\n        }\n\n        if (this.templateTypeIsSelect(type)) {\n            return 'select';\n        }\n    }\n\n    templateTypeIsText(type) {\n        return ['field', 'textarea', 'date', 'date_time', 'time'].includes(type);\n    }\n\n    templateTypeIsSelect(type) {\n        return ['dropdown', 'checkbox', 'checkbox_custom', 'radio', 'radio_custom', 'multiple_select'].includes(type);\n    }\n\n    shouldNotChangeTemplate(templateType, optionValuesElement) {\n        return templateType === undefined || this.alreadyHasCurrentTemplate(templateType, optionValuesElement);\n    }\n\n    alreadyHasCurrentTemplate(templateType, optionValuesElement) {\n        if (templateType === 'text') {\n            return optionValuesElement.children().hasClass('option-text');\n        }\n\n        if (templateType === 'select') {\n            return optionValuesElement.children().hasClass('option-select');\n        }\n    }\n\n    initOptionRow(template, selectValues) {\n        if (selectValues.length !== 0 && ! selectValues.is('.sortable')) {\n            this.makeSortable(selectValues[0]);\n\n            selectValues.addClass('sortable');\n        }\n\n        this.deleteOptionRowEventListener(template);\n\n        window.admin.tooltip();\n    }\n\n    deleteOptionRowEventListener(row) {\n        row.find('.delete-row').on('click', (e) => {\n            $(e.currentTarget).closest('.option-row').remove();\n        });\n    }\n\n    makeSortable(el) {\n        Sortable.create(el, {\n            handle: '.drag-icon',\n            animation: 150,\n        });\n    }\n}\n","import BaseOption from './BaseOption';\n\nexport default class extends BaseOption {\n    constructor() {\n        super();\n\n        let values = FleetCart.data['option.values'];\n\n        $('#type').on('change', (e) => {\n            super.changeOptionType({ type: e.currentTarget.value, values });\n            super.addOptionsErrors(FleetCart.errors['option.values']);\n        });\n\n        $('#type').trigger('change');\n\n        window.admin.removeSubmitButtonOffsetOn('#values');\n    }\n\n    addOptionRow({ valueId, value = { label: '', price: '', price_type: 'fixed' } }) {\n        let template = this.getRowTemplate({ optionId: undefined, valueId, value });\n\n        let selectValues = $('#select-values').append(template);\n\n        super.initOptionRow(template, selectValues);\n    }\n\n    addOptionRowEventListener() {\n        $('#add-new-row').on('click', () => {\n            let valueId = $('#option-values .option-row').length;\n\n            this.addOptionRow({ valueId });\n        });\n    }\n\n    getOptionValuesElement() {\n        return $('#option-values');\n    }\n\n    getAddNewRowButton() {\n        return $('#add-new-row');\n    }\n\n    getInputFieldForErrorKey(key) {\n        let keyParts = key.split('.');\n\n        // Replace all \"_\" to \"-\".\n        keyParts = keyParts.map(k => {\n            return k.split('_').join('-');\n        });\n\n        return $(`#${keyParts.join('-')}`);\n    }\n}\n","import BaseOption from './BaseOption';\n\nexport default class extends BaseOption {\n    constructor() {\n        super();\n\n        this.optionsCount = 0;\n\n        this.addOptions(FleetCart.data['product.options']);\n\n        if (this.optionsCount === 0) {\n            this.addOption();\n        }\n\n        if (this.optionsCount > 3) {\n            this.collapseOptions();\n        }\n\n        super.addOptionsErrors(FleetCart.errors['product.options']);\n\n        $('#add-new-option').on('click', () => this.addOption());\n        $('#add-global-option').on('click', () => this.addGlobalOption());\n    }\n\n    addOptions(options) {\n        for (let option of options) {\n            this.addOption(option);\n        }\n    }\n\n    collapseOptions() {\n        let options = $('.option:not(.option-has-errors)');\n\n        for (let option of options) {\n            $(option).find('[data-toggle=collapse]').trigger('click');\n        }\n    }\n\n    addGlobalOption() {\n        let globalOptionId = $('#global-option').val();\n\n        if (globalOptionId === '') {\n            return window.admin.stopButtonLoading($('#add-global-option'));\n        }\n\n        $.ajax({\n            type: 'GET',\n            url: route('admin.options.show', globalOptionId),\n            dataType: 'json',\n            success: option => {\n                this.addOption(option);\n\n                window.admin.stopButtonLoading($('#add-global-option'));\n            },\n        });\n    }\n\n    addOption(option = { id: null, name: null, type: null, is_required: false, values: [] }) {\n        // Cast \"is_required\" field to boolean.\n        option.is_required = !! JSON.parse(option.is_required);\n\n        let optionId = this.optionsCount;\n\n        let template = _.template($('#option-template').html());\n        let html = $(template({ option, optionId }));\n\n        if (option.name !== null) {\n            setTimeout(() => {\n                $(`#option-${optionId}`).find('#option-name').text(option.name);\n            });\n        }\n\n        let optionGroup = $('#options-group').append(html);\n\n        if (! optionGroup.is('.sortable')) {\n            super.makeSortable(optionGroup[0]);\n\n            optionGroup.addClass('sortable');\n        }\n\n        this.deleteOptionEventListener(html);\n        this.updateOptionNameEventListener(optionId);\n        this.updateTemplateEventListener(optionId, option['values']);\n\n        window.admin.tooltip();\n\n        this.optionsCount++;\n    }\n\n    deleteOptionEventListener(option) {\n        option.find('.delete-option').on('click', (e) => $(e.currentTarget).closest('.option').remove());\n    }\n\n    updateOptionNameEventListener(optionId) {\n        let option = $(`#option-${optionId}`);\n        let old = option.find('#option-name').text();\n\n        $(option).find('.option-name-field').on('input', (e) => {\n            let name = e.currentTarget.value !== '' ? e.currentTarget.value : old;\n\n            option.find('#option-name').text(name);\n        });\n    }\n\n    updateTemplateEventListener(optionId, values = []) {\n        let optionTypeElement = $(`#option-${optionId}-type`);\n\n        optionTypeElement.on('change', (e) => {\n            let type = e.currentTarget.value;\n\n            if (type === '') {\n                return this.getOptionValuesElement(optionId).html('');\n            }\n\n            super.changeOptionType({ optionId, type, values });\n        });\n\n        // Trigger the \"change\" event on option type after attaching the listener\n        // this will automatically take effect of the current option which is\n        // maybe loaded from the old input values or from the product data.\n        optionTypeElement.trigger('change');\n    }\n\n    addOptionRow({ optionId, valueId, value = { label: '', price: '', price_type: 'fixed' } }) {\n        let template = this.getRowTemplate({ optionId, valueId, value });\n\n        let selectValues = $(`#option-${optionId}-select-values`).append(template);\n\n        super.initOptionRow(template, selectValues);\n    }\n\n    addOptionRowEventListener(optionId) {\n        $(`#option-${optionId}-add-new-row`).on('click', () => {\n            let valueId = $(`#option-${optionId}-values .option-row`).length;\n\n            this.addOptionRow({ optionId, valueId });\n        });\n    }\n\n    getOptionValuesElement(optionId) {\n        return $(`#option-${optionId}-values`);\n    }\n\n    getAddNewRowButton(optionId) {\n        return $(`#option-${optionId}-add-new-row`);\n    }\n\n    getInputFieldForErrorKey(key) {\n        let keyParts = key.split('.');\n\n        // Remove the first element which is \"option\".\n        keyParts.shift();\n\n        // Replace all \"_\" to \"-\".\n        keyParts = keyParts.map(k => {\n            return k.split('_').join('-');\n        });\n\n        return $(`#option-${keyParts.join('-')}`);\n    }\n}\n","import Option from './Option';\nimport ProductOption from './ProductOption';\n\nif ($('#option-create-form, #option-edit-form').length !== 0) {\n    new Option();\n}\n\nif ($('#product-create-form, #product-edit-form').length !== 0) {\n    new ProductOption();\n}\n"],"sourceRoot":""}